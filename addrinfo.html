<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link href="/styles/comp.css?v=2" rel="stylesheet" />
    <link href="/libs/iconfont/iconfont.css?v=2" rel="stylesheet" />
    <link href="/styles/layout.css?v=2" rel="stylesheet" />

</head>

<body>
    <div id="app">
        <neo-header></neo-header>
        <div class="page-addr-info">
            <neo-info-title :title="$t('address.value')" subtitle="" v-bind:id="address"></neo-info-title>
            <neo-addr-info ref="addrinfo"></neo-addr-info><br />
            <neo-tran-list 
                ref="tran" 
                v-bind:address="address" 
                v-on:loaded="loaded"
                v-bind:page="currentPage"
                v-bind:count="pageCount">
            </neo-tran-list> 
            <neo-paging 
                v-bind:tint="tintColor" 
                v-bind:page="currentPage" 
                v-bind:count="pageCount" 
                v-bind:total="totalCount" 
                v-on:change="changePaging">
            </neo-paging>
        </div>
        <neo-footer></neo-footer>
    </div>
    <script src="/libs/rem/rem.js?v=4" data-psd="750"></script>
    <script src="/libs/vue/vue.min.js"></script>
    <script src="/libs/moment/moment.min.js"></script>

    <script src="libs/vue-i18n/vue-i18n.min.js"></script>
    <script src="i18n/en.js"></script>
    <script src="i18n/zhCHS.js"></script>
    
    <script src="/libs/echarts/echarts.min.js"></script>
    <script src="https://cdn.bootcss.com/axios/0.18.0/axios.min.js"></script>
    <script src="config.js"></script>
    <script src="/component/comp.js"></script>

    <script>
        const i18n = new VueI18n({
            locale: localStorage.locale || 'zhCHS', // 语言标识
            messages:{
                en,zhCHS
            }
        })        
        var app = new Vue({
            el: '#app',
            i18n,
            data:{
                tintColor: '#F9C400',
                currentPage: 1,
                pageCount: 15,
                totalCount: 0,
            },
            computed: {
                address: function() {
                    return GetUrlParam('address');
                }
            },
            methods: {
                init: function() {
                    // this.$refs.neochart.init();
                    // this.$refs.wallet.init();
                    this.$refs.addrinfo.init(this.address);
                    this.$refs.tran.init()
                },
                loaded: function(data) {
                    console.log('loaded: ', data)
                    this.totalCount = data.count;
                },
                changePaging: function(args) {
                    this.currentPage = args.currentPage;
                    this.pageCount = args.pageCount;
                    this.totalCount = args.totalCount;
                    this.$refs.tran.init()
                }
            }
        })

        app.init();
    </script>
</body>

</html>
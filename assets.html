<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>neo</title>
    <link href="styles/comp.css?v=3" rel="stylesheet" />
    <link href="styles/resp.css?v=3" rel="stylesheet" />
    <link href="libs/iconfont/iconfont.css?v=3" rel="stylesheet" />
    <link href="styles/layout.css?v=3" rel="stylesheet" />

</head>

<body>
    <div id="app">
        <neo-header ref="header" v-bind:class="screenSize"></neo-header>
        <div class="page-asset-list" v-bind:class="screenSize">
            <neo-asset-list 
                ref="asset" 
                v-bind:page="currentPage"
                v-bind:count="pageCount"
                v-bind:class="screenSize"
                v-on:loaded="loaded">
            </neo-asset-list>
            <neo-paging 
                v-bind:tint="tintColor" 
                v-bind:page="currentPage" 
                v-bind:count="pageCount" 
                v-bind:total="totalCount" 
                v-on:change="changePaging" 
                v-bind:class="screenSize">
            </neo-paging>
        </div>
        <neo-footer v-bind:class="screenSize"></neo-footer>
    </div>
    <script src="libs/rem/rem.js?v=4" data-psd="750"></script>
    <script src="libs/vue/vue.min.js"></script>
    <script src="libs/vue-i18n/vue-i18n.min.js"></script>
    <script src="libs/moment/moment.min.js"></script>
    <script src="https://cdn.bootcss.com/axios/0.18.0/axios.min.js"></script>

    <script src="i18n/en.js"></script>
    <script src="i18n/zhCHS.js"></script>

    <script src="config.js"></script>
    <script src="component/comp.js"></script>

    <script>

        const i18n = new VueI18n({
            locale: localStorage.locale || 'zhCHS', // 语言标识
            messages:{
                en,zhCHS
            }
        })
        var app = new Vue({
            el: '#app',
            i18n,
            data: {
                tintColor: '#F9C400',
                currentPage: 1,
                pageCount: 15,
                totalCount: 0
            },
            computed: {
                screenSize: function() {
                    return window.screenSize;
                }
            },
            methods: {
                init: function() {
                    this.currentPage = 1;
                    this.pageCount = 15;
                    this.totalCount = 0;
                    this.load();
                    this.$refs.header.setMenuIdx(2)
                },
                load: function() {
                    var that = this;
                    setTimeout(function (){
                        that.$refs.asset.init();
                    }, 500);
                },
                loaded: function(resp){
                    console.log("loaded", resp)
                    this.totalCount = resp.count;
                },
                changePaging: function(args) {
                    this.currentPage = args.currentPage;
                    this.pageCount = args.pageCount;
                    this.totalCount = args.totalCount;
                    this.load();
                }
            }
        })

        app.init();
    </script>
</body>

</html>